<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">

<meta http-equiv="Content-Security-Policy"
      content="
        default-src 'self';
        script-src 'self';
        frame-src https://www.youtube.com https://www.youtube-nocookie.com;
      ">

<meta name="referrer" content="origin">

<title>YouTube Embed Relay</title>

<style>
    body {
        margin: 0;
        background: #000;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
    iframe {
        width: 560px;
        height: 315px;
        max-width: 100%;
        max-height: 100%;
    }
</style>
</head>
<body>

<div id="player"></div>

<script>
(function () {
    const params = new URLSearchParams(window.location.search);
    const videoId = params.get("v");

    // YouTube video ID valido: 11 caratteri, lettere, numeri, _ e -
    const validId = /^[a-zA-Z0-9_-]{11}$/;

    if (!videoId || !validId.test(videoId)) {
        document.body.innerHTML =
            "<p style='color:white;font-family:sans-serif'>Video non valido</p>";
        return;
    }

    const iframe = document.createElement("iframe");
    iframe.src = "https://www.youtube-nocookie.com/embed/" + videoId;
    iframe.setAttribute("frameborder", "0");
    iframe.setAttribute("allowfullscreen", "");
    iframe.setAttribute(
        "allow",
        "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
    );

    document.getElementById("player").appendChild(iframe);
})();
</script>

</body>
</html>
